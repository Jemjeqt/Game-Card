import { CARD_TYPES, RARITY } from './constants';
import { EFFECT_TYPES, TRIGGERS, TARGETS, createEffect } from './effects';

// Card emoji icons as visual placeholders
const ICONS = {
  ember_sprite: 'ðŸ”¥',
  shadow_imp: 'ðŸ‘¿',
  arcane_spark: 'âš¡',
  healing_wisp: 'âœ¨',
  dark_ritualist: 'ðŸ“œ',
  venom_fang: 'ðŸ',
  mystic_shield: 'ðŸ›¡ï¸',
  ironclad_knight: 'âš”ï¸',
  flame_warlock: 'ðŸ§™',
  soul_leech: 'ðŸ§›',
  fireball: 'â˜„ï¸',
  corpse_raiser: 'ðŸ’€',
  mindbreak: 'ðŸŒ€',
  blood_pact: 'ðŸ©¸',
  shadowstrike_assassin: 'ðŸ—¡ï¸',
  elder_dragon: 'ðŸ‰',
  abyssal_devourer: 'ðŸ‘¹',
  inferno_wave: 'ðŸŒ‹',
  archmage_solara: 'ðŸŒŸ',
  divine_protector: 'ðŸ‘¼',
  skeleton_token: 'ðŸ’€',
};

// ===== ALL 20 CARD DEFINITIONS =====
const CARD_DEFINITIONS = [
  // ===== LOW COST (1-2 Mana) =====
  {
    id: 'ember_sprite',
    name: 'Ember Sprite',
    manaCost: 1,
    attack: 1,
    defense: 2,
    type: CARD_TYPES.MINION,
    rarity: RARITY.COMMON,
    effect: null,
    description: 'A tiny but persistent flame spirit.',
    icon: ICONS.ember_sprite,
    keywords: [],
  },
  {
    id: 'shadow_imp',
    name: 'Shadow Imp',
    manaCost: 1,
    attack: 2,
    defense: 1,
    type: CARD_TYPES.MINION,
    rarity: RARITY.COMMON,
    effect: null,
    description: 'Quick and deadly, but fragile.',
    icon: ICONS.shadow_imp,
    keywords: [],
  },
  {
    id: 'arcane_spark',
    name: 'Arcane Spark',
    manaCost: 1,
    attack: 0,
    defense: 0,
    type: CARD_TYPES.SPELL,
    rarity: RARITY.COMMON,
    effect: createEffect(EFFECT_TYPES.DAMAGE, 2, TARGETS.ENEMY_HERO, TRIGGERS.ON_PLAY),
    description: 'Deal 2 damage to the enemy hero.',
    icon: ICONS.arcane_spark,
    keywords: [],
  },
  {
    id: 'healing_wisp',
    name: 'Healing Wisp',
    manaCost: 1,
    attack: 0,
    defense: 3,
    type: CARD_TYPES.MINION,
    rarity: RARITY.COMMON,
    effect: createEffect(EFFECT_TYPES.HEAL, 2, TARGETS.SELF_HERO, TRIGGERS.ON_PLAY),
    description: 'Battlecry: Restore 2 HP to your hero.',
    icon: ICONS.healing_wisp,
    keywords: [],
  },
  {
    id: 'dark_ritualist',
    name: 'Dark Ritualist',
    manaCost: 2,
    attack: 2,
    defense: 2,
    type: CARD_TYPES.MINION,
    rarity: RARITY.COMMON,
    effect: createEffect(EFFECT_TYPES.DRAW, 1, TARGETS.SELF_HERO, TRIGGERS.ON_PLAY),
    description: 'Battlecry: Draw 1 card.',
    icon: ICONS.dark_ritualist,
    keywords: [],
  },
  {
    id: 'venom_fang',
    name: 'Venom Fang',
    manaCost: 2,
    attack: 3,
    defense: 1,
    type: CARD_TYPES.MINION,
    rarity: RARITY.RARE,
    effect: createEffect(EFFECT_TYPES.DAMAGE, 1, TARGETS.ENEMY_HERO, TRIGGERS.ON_ATTACK),
    description: 'When this attacks, deal 1 extra damage to the enemy hero.',
    icon: ICONS.venom_fang,
    keywords: [],
  },
  {
    id: 'mystic_shield',
    name: 'Mystic Shield',
    manaCost: 2,
    attack: 0,
    defense: 0,
    type: CARD_TYPES.SPELL,
    rarity: RARITY.COMMON,
    effect: createEffect(EFFECT_TYPES.BUFF_DEFENSE, 3, TARGETS.FRIENDLY_MINION, TRIGGERS.ON_PLAY),
    description: 'Give a friendly minion +3 Defense.',
    icon: ICONS.mystic_shield,
    keywords: [],
  },

  // ===== MID COST (3-4 Mana) =====
  {
    id: 'ironclad_knight',
    name: 'Ironclad Knight',
    manaCost: 3,
    attack: 2,
    defense: 5,
    type: CARD_TYPES.MINION,
    rarity: RARITY.COMMON,
    effect: createEffect(EFFECT_TYPES.SHIELD, 2, TARGETS.SELF, TRIGGERS.ON_PLAY),
    description: 'Battlecry: Gain a shield that absorbs 2 damage.',
    icon: ICONS.ironclad_knight,
    keywords: ['shield'],
  },
  {
    id: 'flame_warlock',
    name: 'Flame Warlock',
    manaCost: 3,
    attack: 4,
    defense: 3,
    type: CARD_TYPES.MINION,
    rarity: RARITY.RARE,
    effect: createEffect(EFFECT_TYPES.DAMAGE, 2, TARGETS.ENEMY_HERO, TRIGGERS.ON_PLAY),
    description: 'Battlecry: Deal 2 damage to the enemy hero.',
    icon: ICONS.flame_warlock,
    keywords: [],
  },
  {
    id: 'soul_leech',
    name: 'Soul Leech',
    manaCost: 3,
    attack: 3,
    defense: 3,
    type: CARD_TYPES.MINION,
    rarity: RARITY.RARE,
    effect: createEffect(EFFECT_TYPES.LIFESTEAL, 0, TARGETS.SELF, TRIGGERS.PASSIVE),
    description: 'Lifesteal: Heal your hero for damage dealt.',
    icon: ICONS.soul_leech,
    keywords: ['lifesteal'],
  },
  {
    id: 'fireball',
    name: 'Fireball',
    manaCost: 3,
    attack: 0,
    defense: 0,
    type: CARD_TYPES.SPELL,
    rarity: RARITY.COMMON,
    effect: createEffect(EFFECT_TYPES.DAMAGE, 5, TARGETS.ENEMY_HERO, TRIGGERS.ON_PLAY),
    description: 'Deal 5 damage to the enemy hero.',
    icon: ICONS.fireball,
    keywords: [],
  },
  {
    id: 'corpse_raiser',
    name: 'Corpse Raiser',
    manaCost: 4,
    attack: 3,
    defense: 4,
    type: CARD_TYPES.MINION,
    rarity: RARITY.EPIC,
    effect: createEffect(EFFECT_TYPES.SUMMON, 1, TARGETS.SELF, TRIGGERS.ON_PLAY),
    description: 'Battlecry: Summon a 1/1 Skeleton.',
    icon: ICONS.corpse_raiser,
    keywords: [],
  },
  {
    id: 'mindbreak',
    name: 'Mindbreak',
    manaCost: 4,
    attack: 0,
    defense: 0,
    type: CARD_TYPES.SPELL,
    rarity: RARITY.RARE,
    effect: createEffect(EFFECT_TYPES.AOE_DAMAGE, 2, TARGETS.ALL_ENEMY_MINIONS, TRIGGERS.ON_PLAY),
    description: 'Deal 2 damage to ALL enemy minions.',
    icon: ICONS.mindbreak,
    keywords: [],
  },
  {
    id: 'blood_pact',
    name: 'Blood Pact',
    manaCost: 3,
    attack: 0,
    defense: 0,
    type: CARD_TYPES.SPELL,
    rarity: RARITY.RARE,
    effect: [
      createEffect(EFFECT_TYPES.SELF_DAMAGE, 3, TARGETS.SELF_HERO, TRIGGERS.ON_PLAY),
      createEffect(EFFECT_TYPES.DRAW, 3, TARGETS.SELF_HERO, TRIGGERS.ON_PLAY),
    ],
    description: 'Deal 3 damage to your hero. Draw 3 cards.',
    icon: ICONS.blood_pact,
    keywords: [],
  },
  {
    id: 'shadowstrike_assassin',
    name: 'Shadowstrike Assassin',
    manaCost: 4,
    attack: 5,
    defense: 2,
    type: CARD_TYPES.MINION,
    rarity: RARITY.RARE,
    effect: createEffect(EFFECT_TYPES.DAMAGE, 1, TARGETS.ENEMY_HERO, TRIGGERS.ON_PLAY),
    description: 'Battlecry: Deal 1 damage to the enemy hero.',
    icon: ICONS.shadowstrike_assassin,
    keywords: [],
  },

  // ===== HIGH COST (5-7 Mana) =====
  {
    id: 'elder_dragon',
    name: 'Elder Dragon',
    manaCost: 7,
    attack: 7,
    defense: 7,
    type: CARD_TYPES.MINION,
    rarity: RARITY.LEGENDARY,
    effect: createEffect(EFFECT_TYPES.DAMAGE, 3, TARGETS.ENEMY_HERO, TRIGGERS.ON_PLAY),
    description: 'Battlecry: Deal 3 damage to the enemy hero.',
    icon: ICONS.elder_dragon,
    keywords: [],
  },
  {
    id: 'abyssal_devourer',
    name: 'Abyssal Devourer',
    manaCost: 6,
    attack: 5,
    defense: 6,
    type: CARD_TYPES.MINION,
    rarity: RARITY.EPIC,
    effect: createEffect(EFFECT_TYPES.DESTROY, 1, TARGETS.RANDOM_ENEMY_MINION, TRIGGERS.ON_PLAY),
    description: 'Battlecry: Destroy a random enemy minion.',
    icon: ICONS.abyssal_devourer,
    keywords: [],
  },
  {
    id: 'inferno_wave',
    name: 'Inferno Wave',
    manaCost: 5,
    attack: 0,
    defense: 0,
    type: CARD_TYPES.SPELL,
    rarity: RARITY.EPIC,
    effect: [
      createEffect(EFFECT_TYPES.DAMAGE, 3, TARGETS.ENEMY_HERO, TRIGGERS.ON_PLAY),
      createEffect(EFFECT_TYPES.AOE_DAMAGE, 3, TARGETS.ALL_ENEMY_MINIONS, TRIGGERS.ON_PLAY),
    ],
    description: 'Deal 3 damage to the enemy hero and ALL enemy minions.',
    icon: ICONS.inferno_wave,
    keywords: [],
  },
  {
    id: 'archmage_solara',
    name: 'Archmage Solara',
    manaCost: 5,
    attack: 4,
    defense: 5,
    type: CARD_TYPES.MINION,
    rarity: RARITY.LEGENDARY,
    effect: createEffect(EFFECT_TYPES.DAMAGE, 2, TARGETS.ENEMY_HERO, TRIGGERS.START_OF_TURN),
    description: 'Start of Turn: Deal 2 damage to the enemy hero.',
    icon: ICONS.archmage_solara,
    keywords: [],
  },
  {
    id: 'divine_protector',
    name: 'Divine Protector',
    manaCost: 5,
    attack: 3,
    defense: 8,
    type: CARD_TYPES.MINION,
    rarity: RARITY.EPIC,
    effect: [
      createEffect(EFFECT_TYPES.HEAL, 5, TARGETS.SELF_HERO, TRIGGERS.ON_PLAY),
      createEffect(EFFECT_TYPES.BUFF_ATTACK, 1, TARGETS.ALL_FRIENDLY_MINIONS, TRIGGERS.ON_PLAY),
    ],
    description: 'Battlecry: Heal hero for 5. Give all friendly minions +1 Attack.',
    icon: ICONS.divine_protector,
    keywords: [],
  },
];

// Skeleton token (not in main pool, summoned by Corpse Raiser)
export const SKELETON_TOKEN = {
  id: 'skeleton_token',
  name: 'Skeleton',
  manaCost: 0,
  attack: 1,
  defense: 1,
  type: CARD_TYPES.MINION,
  rarity: RARITY.COMMON,
  effect: null,
  description: 'A reanimated skeleton.',
  icon: ICONS.skeleton_token,
  keywords: ['token'],
};

// Get a card definition by its ID
export function getCardById(cardId) {
  if (cardId === 'skeleton_token') return SKELETON_TOKEN;
  return CARD_DEFINITIONS.find((c) => c.id === cardId) || null;
}

// Get all card definitions (for deck building)
export function getAllCards() {
  return [...CARD_DEFINITIONS];
}

export default CARD_DEFINITIONS;
